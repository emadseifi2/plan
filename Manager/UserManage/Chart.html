<link rel="stylesheet" href="https://region6.tehran.ir/Portals/0/MyBizTemplate/assets/Css/OrgChart.css" />
<script src="https://region6.tehran.ir/Portals/0/skins/themplater6_v06/assets/vendor/OrgChartJS/orgchart.js?"
    type="text/javascript"></script>
<style>
    .orgchart .node .title {
        font-family: inherit !important;
    }

    .orgchart .node .content {
        font-family: inherit !important;
    }

    .about-section-solar .about-shape2 {
        position: absolute;
        top: 35px;
        right: 30px;
        animation: upDown 1.8s ease-in-out 1.8s forwards infinite alternate;
    }

    .about-section-solar .about-shape-img {
        position: absolute;
        bottom: 35px;
        left: 30px;
        animation: upDown 2s ease-in-out 1.8s forwards infinite alternate;
    }
</style>
<section class="about-section-solar mx-0 p-5">
    <div id="chart-container" class="patern-bg"></div>
    <div id="LoadDataChart" class="d-none">


        <ul style="display:none">
            <li>[DEPUTY_ID]</li>
            <li>[OFFICE_PID]</li>
            <li>[USER_NAME]&nbsp;[USER_FAMILY]</li>
            <li>[ORGANIZATIONAL_TITLE]</li>
            <li>[URL]</li>
        </ul>



    </div>
    <div class="about-shape2">
        <img alt="footer shape" src="/Portals/2/Econet/Image/Skin/solar/footer-shape2.png">
    </div>
    <div class="about-shape-img">
        <img alt="gif" src="/Portals/2/Econet/Image/Skin/Other/logo.png" />
    </div>
</section>
<script>
    $(function () {

        var loadDataChart = document.getElementById("LoadDataChart").querySelectorAll("ul");
        var ObjChartLevel_0 = {};

        let Modirkol = [];
        //معاونت ها
        let HozeDaftar = [];
        let BarnameriziVaPayesh = [];
        let BodgeriziVaModiriyateEtebarat = [];
        let MostanadsaziVaDashbordha = [];
        let RahbariProjeVaControlAmalkard = [];
        let RahbariVaKontrolBodge = [];

        var i;
        for (i = 0; i < loadDataChart.length; i++) {
            let User_Id = loadDataChart[i].childNodes[1].innerText;
            let User_PID = loadDataChart[i].childNodes[3].innerText;
            let User_Name = loadDataChart[i].childNodes[5].innerText;
            let User_Title = loadDataChart[i].childNodes[7].innerText;
            let User_Avatar = loadDataChart[i].childNodes[9].innerText;

            console.log(User_Id);

            if (User_PID == 10) {
                let ObjChart = {};
                ObjChart.name = User_Name;
                ObjChart.title = User_Title;
                ObjChart.avatar = User_Avatar;
                HozeDaftar.push(ObjChart);
            } else if (User_PID == 2) {
                let ObjChart = {};
                ObjChart.name = User_Name;
                ObjChart.title = User_Title;
                ObjChart.avatar = User_Avatar;
                BarnameriziVaPayesh.push(ObjChart);
            } else if (User_PID == 3) {
                let ObjChart = {};
                ObjChart.name = User_Name;
                ObjChart.title = User_Title;
                ObjChart.avatar = User_Avatar;
                BodgeriziVaModiriyateEtebarat.push(ObjChart);
            } else if (User_PID == 4) {
                let ObjChart = {};
                ObjChart.name = User_Name;
                ObjChart.title = User_Title;
                ObjChart.avatar = User_Avatar;
                MostanadsaziVaDashbordha.push(ObjChart);
            } else if (User_PID == 5) {
                let ObjChart = {};
                ObjChart.name = User_Name;
                ObjChart.title = User_Title;
                ObjChart.avatar = User_Avatar;
                RahbariProjeVaControlAmalkard.push(ObjChart);
            } else if (User_PID == 6) {
                let ObjChart = {};
                ObjChart.name = User_Name;
                ObjChart.title = User_Title;
                ObjChart.avatar = User_Avatar;
                RahbariVaKontrolBodge.push(ObjChart);
            } else if (User_PID == 1) {
                let ObjChart = {};
                ObjChart.name = User_Name;
                ObjChart.title = User_Title;
                ObjChart.avatar = User_Avatar;
                ObjChart.collapsed = true;
                if (User_Id == 2) {
                    ObjChart.children = BarnameriziVaPayesh;
                } else if (User_Id == 3) {
                    ObjChart.children = BodgeriziVaModiriyateEtebarat;
                } else if (User_Id == 4) {
                    ObjChart.children = MostanadsaziVaDashbordha;
                } else if (User_Id == 5) {
                    ObjChart.children = RahbariProjeVaControlAmalkard;
                } else if (User_Id == 6) {
                    ObjChart.children = RahbariVaKontrolBodge;
                } else if (User_Id == 10) {
                    ObjChart.children = HozeDaftar;
                };
                Modirkol.push(ObjChart);
            } else if (User_PID == 0) {
                ObjChartLevel_0.name = User_Name;
                ObjChartLevel_0.title = User_Title;
                ObjChartLevel_0.avatar = User_Avatar;
                ObjChartLevel_0.children = Modirkol;
            }
        }

        console.log(Modirkol);

        var nodeTemplate = function (data) {
            return `
                <img class="avatar" src="${data.avatar}"/>
                <div class="title">${data.name}</div>
                <div class="content">${data.title}</div>
                `;
        };

        var oc = $('#chart-container').orgchart({
            'data': ObjChartLevel_0,
            'nodeTemplate': nodeTemplate,
            'verticalLevel': 3,
            'visibleLevel': 4
        });

    });
</script>